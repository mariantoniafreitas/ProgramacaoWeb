<!DOCTYPE html>
<html lang="pt-br" xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="UTF-8">
	<div th:replace="~{controle :: import}"></div>
	<title>CRUD Funcionário</title>
	<link rel="stylesheet" th:href="@{/css/CRUD_page.css}">
	<link rel="stylesheet" th:href="@{/css/toolbar-dropdown.css}">
</head>

<body>
	<!-- Header -->
	<div th:replace="~{controle :: header}"></div>
	
	<div class="row mx-0">


<main class="col-12 px-md-4">
			<!-- ADD -->
			<div th:if="${funcionario_add != null}">
				<script th:inline="javascript">
					document.addEventListener('DOMContentLoaded', function () {
						document.getElementById('cpfAdd').value = '';
					});
				</script>
				
				<h1>Registrar Funcionário</h1>
				
				<form action="#" th:action="@{/funcionario/CRUD/add}" th:object="${funcionario_add}" method="post">
					<div class="form-group mb-2">
				    	<label for="login">Login</label>
				    	<input type="text" class="form-control" name="login" id="login" placeholder="Ex.: maria123" required>
				    	<small id="loginHelp" class="form-text text-warning">Campo único.</small>
				  	</div>
				  	
				  	<div class="form-group mb-2">
				    	<label for="senha">Senha</label>
				    	<input type="password" class="form-control" name="senha" id="senha" placeholder="Ex.: 123456" required>
				  		<small id="senhaHelp" class="form-text text-muted">Deve conter entre 6 e 20 caracteres.</small>
				  	</div>
				  	
				  	<div class="form-group mb-2">
				    	<label for="nome">Nome</label>
				    	<input type="text" class="form-control" name="nome" id="nome" placeholder="Ex.: Maria José" th:field="*{nome}" required>
				  		<small id="senhaHelp" class="form-text text-muted">Deve conter entre 3 e 60 caracteres.</small>
				  	</div>
				  	
				  	<div class="form-group mb-2">
				    	<label for="email">Email</label>
				    	<input type="email" class="form-control" name="email" id="email" placeholder="Ex.: maria@gmail.com" th:field="*{email}" required>
				  	</div>
				  	
				  	<div class="form-group mb-2">
				    	<label for="cpf">CPF</label>
				    	<input type="text" class="form-control" name="cpf" id="cpfAdd" pattern="\d{11}" placeholder="Ex.: 00000000000" th:field="*{cpf}" required>
				  		<small id="cpfHelp" class="form-text text-warning">Campo único.</small>
				  	</div>
				  	
				  	<div class="form-group mb-2">
				    	<label for="telefone">Telefone</label>
				    	<input type="tel" class="form-control" name="telefone" id="tel" pattern="\d{9,11}" placeholder="Ex.: 00000000000" th:field="*{tel}" required>
				  		<small id="telefoneHelp" class="form-text text-warning">Campo único.</small>
				  	</div>
				  	
				  	<div class="form-group mb-2">
				    	<label for="endereco">Endereço</label>
				    	<input type="text" class="form-control" name="endereco" id="endereco" placeholder="Ex.: Rua Maria Jose,100" th:field="*{endereco}" required>
				  		<small id="senhaHelp" class="form-text text-muted">Deve conter entre 20 e 100 caracteres.</small>
				  	</div>
				  	
				  	<div class="form-group mb-2">
				    	<label for="dataNascimento">Data de Nascimento</label>
				    	<input type="text" class="form-control" name="dataNascimento" id="dataNascimento" placeholder="Ex.: ddMMYYYY" th:field="*{dataNascimento}" required>
				  	</div>
				  	
				  	<div class="form-group mb-2">
				    	<label for="cargo">Cargo</label>
				    	<input type="text" class="form-control" name="cargo" id="cargo" placeholder="Ex.: Gerente" th:field="*{cargo}" required>
				  	</div>
				  	
				  	<div class="form-group mb-2">
				    	<label for="salario">Salário</label>
				    	<input type="text" class="form-control" name="salario" id="salario" placeholder="Ex.: 010101" th:field="*{dataNascimento}" required>
				  	</div>
				  	
				  	<button type="submit" class="btn my-3 btn-primary">Registrar</button>
				</form>
				<div th:if="${respostaAdd != null}">
					<span th:text="${respostaAdd}"></span>
				</div>
			</div>


			<!-- LIST -->
			<div th:if="${funcionario_lista != null}">
				<h2>Buscar Funcionário</h2>
				
				<nav class="navbar navbar-light bg-light">
				  <form class="form-inline d-flex ps-2" th:action="@{/funcionario/CRUD/buscaCPF}" method="post">
				    <input class="form-control mr-sm-2" type="text" name="cpf" id="cpf" required placeholder="CPF do funcionário..." aria-label="Search">
				    <button class="btn btn-outline-success ms-3 my-2 my-sm-0" type="submit">Buscar</button>
				  </form>
				</nav>
				
				<h1 class="mt-4">Lista de funcionários</h1>
				
				<table class="table">
				  <thead class="thead-dark">
				    <tr>
				      <th scope="col">Id</th>
				      <th scope="col">Login</th>
				      <th scope="col">Senha</th>
				      <th scope="col">Nome</th>
				      <th scope="col">Email</th>
				      <th scope="col">CPF</th>
				      <th scope="col">Telefone</th>
				      <th scope="col">Endereço</th>
				      <th scope="col">Data de Nascimento</th>
				      <th scope="col">Cargo</th>
				      <th scope="col">Salario</th>
				      <th scope="col"></th>
				    </tr>
				  </thead>
				  <tbody>
				    <tr th:each="funcionario : ${funcionario_lista}" th:if="${funcionario.cpf != null}">
				      <td th:text="${funcionario.id}"></td>
				      <td th:text="${funcionario.usuario.login}"></td>
				      <td th:text="${funcionario.usuario.senha}"></td>
				      <td th:text="${funcionario.nome}"></td>
				      <td th:text="${funcionario.email}"></td>
				      <td th:text="${funcionario.cpf}"></td>
				      <td th:text="${funcionario.tel}"></td>
				      <td th:text="${funcionario.endereco}"></td>
				      <td th:text="${funcionario.dataNascimento}"></td>
				      <td th:text="${funcionario.cargo}"></td>
				      <td th:text="${funcionario.salario}"></td>
				      <td class="btn-actions">
						  <button type="button" class="btn btn-warning">
								<a th:href="@{/funcionario/CRUD/editar(id=${funcionario.id})}">Editar</a>
							</button>
							<button type="button" class="btn btn-danger">
								<a th:href="@{/funcionario/CRUD/deletePorCPF(cpf=${funcionario.cpf})}">Excluir</a>
							</button>
					  </td>
				    </tr>
				    
				    <tr th:if="${funcionario_lista.size == 0}">
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td>Nenhum funcionário foi registrado</td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
					</tr>
				  </tbody>
				</table>
			</div>

			<!-- EDIT -->
			<div th:if="${funcionario_edit != null}">
				<script th:inline="javascript">
					document.addEventListener('DOMContentLoaded', function () {
						document.getElementById('telefoneAdd').value = '';
					});
				</script>
				
				<h1>Atualizar funcionario</h1>
				
				<form action="#" th:action="@{/funcionario/CRUD/atualizar}" th:object="${funcionario_edit}" method="post">
					<div class="form-group mb-2">
				    	<label for="login">Login</label>
				    	<input type="text" class="form-control" name="login" id="login" placeholder="Ex.: maria123" required>
				    	<small id="loginHelp" class="form-text text-warning">Campo único.</small>
				  	</div>
				  	
				  	<div class="form-group mb-2">
				    	<label for="senha">Senha</label>
				    	<input type="password" class="form-control" name="senha" id="senha" placeholder="Ex.: 123456" required>
				  		<small id="senhaHelp" class="form-text text-muted">Deve conter entre 6 e 20 caracteres.</small>
				  	</div>
				  	
				  	<div class="form-group mb-2">
				    	<label for="nome">Nome</label>
				    	<input type="text" class="form-control" name="nome" id="nome" placeholder="Ex.: Maria Antonia" th:field="*{nome}" required>
				  		<small id="senhaHelp" class="form-text text-muted">Deve conter entre 3 e 60 caracteres.</small>
				  	</div>
				  	
				  	<div class="form-group mb-2">
				    	<label for="email">Email</label>
				    	<input type="email" class="form-control" name="email" id="email" placeholder="Ex.: maria@gmail.com" th:field="*{email}" required>
				  	</div>
				  	
				  	<div class="form-group mb-2">
				    	<label for="cpf">CPF</label>
				    	<input type="text" class="form-control" name="cpf" id="cpfAdd" pattern="\d{11}" placeholder="Ex.: 00000000000" th:field="*{cpf}" required>
				  		<small id="cpfHelp" class="form-text text-warning">Campo único.</small>
				  	</div>
				  	
				  	<div class="form-group mb-2">
				    	<label for="telefone">Telefone</label>
				    	<input type="tel" class="form-control" name="telefone" id="tel" pattern="\d{9,11}" placeholder="Ex.: 00000000000" th:field="*{tel}" required>
				  		<small id="telefoneHelp" class="form-text text-warning">Campo único.</small>
				  	</div>
				  	
				  	<div class="form-group mb-2">
				    	<label for="endereco">Endereço</label>
				    	<input type="text" class="form-control" name="endereco" id="endereco" placeholder="Ex.: Rua Maria Jose, 100" th:field="*{endereco}" required>
				  		<small id="senhaHelp" class="form-text text-muted">Deve conter entre 20 e 100 caracteres.</small>
				  	</div>
				  	
				  	<div class="form-group mb-2">
				    	<label for="dataNascimento">Data de Nascimento</label>
				    	<input type="text" class="form-control" name="dataNascimento" id="dataNascimento" placeholder="Ex.: 010101" th:field="*{dataNascimento}" required>
				  	</div>
				  	
				  	<div class="form-group mb-2">
				    	<label for="cargo">Cargo</label>
				    	<input type="text" class="form-control" name="cargo" id="cargo" placeholder="Ex.: Gerente" th:field="*{cargo}" required>
				  	</div>
				  	
				  	<div class="form-group mb-2">
				    	<label for="salario">Salário</label>
				    	<input type="text" class="form-control" name="salario" id="salario" placeholder="Ex.: 1250" th:field="*{salario}" required>
				  	</div>
				  	
				  	<button type="submit" class="btn my-3 btn-primary">Atualizar</button>
				</form>
			</div>

		</main>
	</div>
</body>

</html>